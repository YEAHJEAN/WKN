{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import io from'socket.io-client';import axios from'axios';import'./Chatroom.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const socket=io('https://kmk510.store',{secure:true,transports:['websocket','polling']});function Chatroom(){const navigate=useNavigate();const[username,setUsername]=useState('');const[chatroomNameInput,setChatroomNameInput]=useState('');useEffect(()=>{const storedEmail=sessionStorage.getItem('email');if(storedEmail){console.log('이메일 가져오기 성공:',storedEmail);fetchUserData(storedEmail);}},[]);const fetchUserData=async email=>{try{const response=await axios.get(\"https://kmk510.store/api/userdata?email=\".concat(email));if(response.status===200){console.log('유저 데이터 가져오기 성공:',response.data);setUsername(response.data.username);}else{console.error('사용자 데이터 가져오기 실패');}}catch(error){console.error('사용자 데이터 가져오기 실패:',error);}};const handleSubmit=e=>{e.preventDefault();if(username.trim()!==''&&chatroomNameInput.trim()!==''){navigate(\"/chat/\".concat(chatroomNameInput,\"/\").concat(username));}};return/*#__PURE__*/_jsx(\"div\",{className:\"chatroom-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Enter Chatroom\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"username\",value:username,readOnly:true}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"chatroom\",value:chatroomNameInput,onChange:e=>setChatroomNameInput(e.target.value),placeholder:\"\\uCC44\\uD305\\uBC29 \\uC774\\uB984\\uC744 \\uC785\\uB825\\uD558\\uC138\\uC694\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Join\"})]})]})});}export default Chatroom;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","io","axios","jsx","_jsx","jsxs","_jsxs","socket","secure","transports","Chatroom","navigate","username","setUsername","chatroomNameInput","setChatroomNameInput","storedEmail","sessionStorage","getItem","console","log","fetchUserData","email","response","get","concat","status","data","error","handleSubmit","e","preventDefault","trim","className","children","onSubmit","type","id","value","readOnly","onChange","target","placeholder"],"sources":["C:/Users/user/mk/frontend/src/Chatroom.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport io from 'socket.io-client';\r\nimport axios from 'axios';\r\nimport './Chatroom.css';\r\n\r\nconst socket = io('https://kmk510.store', {\r\n  secure: true,\r\n  transports: ['websocket', 'polling']\r\n});\r\n\r\nfunction Chatroom() {\r\n  const navigate = useNavigate();\r\n  const [username, setUsername] = useState('');\r\n  const [chatroomNameInput, setChatroomNameInput] = useState('');\r\n\r\n  useEffect(() => {\r\n    const storedEmail = sessionStorage.getItem('email');\r\n    if (storedEmail) {\r\n      console.log('이메일 가져오기 성공:', storedEmail);\r\n      fetchUserData(storedEmail);\r\n    }\r\n  }, []);\r\n\r\n  const fetchUserData = async (email) => {\r\n    try {\r\n      const response = await axios.get(`https://kmk510.store/api/userdata?email=${email}`);\r\n      if (response.status === 200) {\r\n        console.log('유저 데이터 가져오기 성공:', response.data);\r\n        setUsername(response.data.username);\r\n      } else {\r\n        console.error('사용자 데이터 가져오기 실패');\r\n      }\r\n    } catch (error) {\r\n      console.error('사용자 데이터 가져오기 실패:', error);\r\n    }\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    if (username.trim() !== '' && chatroomNameInput.trim() !== '') {\r\n      navigate(`/chat/${chatroomNameInput}/${username}`);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"chatroom-container\">\r\n      <div className=\"form-container\">\r\n        <h1>Enter Chatroom</h1>\r\n        <form onSubmit={handleSubmit}>\r\n          <input type=\"text\" id=\"username\" value={username} readOnly />\r\n          <input type=\"text\" id=\"chatroom\" value={chatroomNameInput} onChange={(e) => setChatroomNameInput(e.target.value)} placeholder=\"채팅방 이름을 입력하세요\" />\r\n          <button type=\"submit\">Join</button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );  \r\n}\r\n\r\nexport default Chatroom;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}