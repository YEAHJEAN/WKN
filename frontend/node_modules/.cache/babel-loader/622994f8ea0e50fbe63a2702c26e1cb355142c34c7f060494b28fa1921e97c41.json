{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import axios from'axios';import'./Mypage.css';import PasswordConfirmation from'./PasswordConfirmation';// PasswordConfirmation 컴포넌트를 가져옴\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function MyPage(){const navigate=useNavigate();const[username,setUsername]=useState('');const[email,setEmail]=useState('');const[isWithdraw,setIsWithdraw]=useState(false);// 회원 탈퇴 확인 페이지 표시 여부\nuseEffect(()=>{const storedEmail=sessionStorage.getItem('email');if(storedEmail){console.log('이메일 가져오기 성공:',storedEmail);setEmail(storedEmail);fetchUserData(storedEmail);}},[]);const fetchUserData=async email=>{try{const response=await axios.get(\"/api/userdata?email=\".concat(email));if(response.status===200){console.log('가져온 사용자 데이터:',response.data);// 데이터 로그 추가\nsetUsername(response.data.username);}else{console.error('사용자 데이터 가져오기 실패');}}catch(error){console.error('사용자 데이터 가져오기 실패:',error);}};const handleLogout=()=>{axios.post('/api/logout').then(response=>{sessionStorage.removeItem('email');console.log('세션에서 이메일 삭제:',email);navigate('/login');}).catch(error=>{console.error('로그아웃 실패:',error);});};const handleWithdraw=()=>{setIsWithdraw(true);// 회원 탈퇴 확인 페이지로 이동\n};const handleConfirmWithdraw=()=>{setIsWithdraw(false);// 회원 탈퇴 확인 후 원래 페이지로 돌아옴\nnavigate('/login');// 로그인 페이지로 이동\n};const handleClick=()=>{navigate('/home');};if(isWithdraw){return/*#__PURE__*/_jsx(PasswordConfirmation,{onWithdraw:handleConfirmWithdraw});// PasswordConfirmation 컴포넌트를 표시\n}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleClick,style:{cursor:'pointer',border:'none',background:'none',width:'300px',display:'block',margin:'0 auto',outline:'none'},children:/*#__PURE__*/_jsx(\"img\",{src:\"Home.jpg\",alt:\"Go to Home\",style:{width:'250px',height:'120px'}})}),/*#__PURE__*/_jsxs(\"div\",{className:\"mypage-box\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Mypage\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"username\",children:\"\\uC774\\uB984 \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"username\",value:username,onChange:e=>setUsername(e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"\\uC774\\uBA54\\uC77C \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"email\",value:email,readOnly:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mypage-button-container\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,className:\"logout-button\",children:\"\\uB85C\\uADF8\\uC544\\uC6C3\"}),/*#__PURE__*/_jsx(\"div\",{className:\"vertical-separator\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleWithdraw,className:\"withdraw-button\",children:\"\\uD68C\\uC6D0\\uD0C8\\uD1F4\"})]})]})]});}export default MyPage;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","axios","PasswordConfirmation","jsx","_jsx","jsxs","_jsxs","MyPage","navigate","username","setUsername","email","setEmail","isWithdraw","setIsWithdraw","storedEmail","sessionStorage","getItem","console","log","fetchUserData","response","get","concat","status","data","error","handleLogout","post","then","removeItem","catch","handleWithdraw","handleConfirmWithdraw","handleClick","onWithdraw","children","onClick","style","cursor","border","background","width","display","margin","outline","src","alt","height","className","htmlFor","type","id","value","onChange","e","target","readOnly"],"sources":["C:/Users/user/mk/frontend/src/Mypage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport './Mypage.css';\r\nimport PasswordConfirmation from './PasswordConfirmation'; // PasswordConfirmation 컴포넌트를 가져옴\r\n\r\nfunction MyPage() {\r\n  const navigate = useNavigate();\r\n  const [username, setUsername] = useState('');\r\n  const [email, setEmail] = useState('');\r\n  const [isWithdraw, setIsWithdraw] = useState(false); // 회원 탈퇴 확인 페이지 표시 여부\r\n\r\n  useEffect(() => {\r\n    const storedEmail = sessionStorage.getItem('email');\r\n    if (storedEmail) {\r\n      console.log('이메일 가져오기 성공:', storedEmail);\r\n      setEmail(storedEmail);\r\n      fetchUserData(storedEmail);\r\n    }\r\n  }, []);\r\n\r\n  const fetchUserData = async (email) => {\r\n    try {\r\n      const response = await axios.get(`/api/userdata?email=${email}`);\r\n      if (response.status === 200) {\r\n        console.log('가져온 사용자 데이터:', response.data);  // 데이터 로그 추가\r\n        setUsername(response.data.username);\r\n      } else {\r\n        console.error('사용자 데이터 가져오기 실패');\r\n      }\r\n    } catch (error) {\r\n      console.error('사용자 데이터 가져오기 실패:', error);\r\n    }\r\n  };\r\n\r\n  const handleLogout = () => {\r\n    axios.post('/api/logout')\r\n      .then(response => {\r\n        sessionStorage.removeItem('email');\r\n        console.log('세션에서 이메일 삭제:', email);\r\n        navigate('/login');\r\n      })\r\n      .catch(error => {\r\n        console.error('로그아웃 실패:', error);\r\n      });\r\n  };\r\n\r\n  const handleWithdraw = () => {\r\n    setIsWithdraw(true); // 회원 탈퇴 확인 페이지로 이동\r\n  };\r\n\r\n  const handleConfirmWithdraw = () => {\r\n    setIsWithdraw(false); // 회원 탈퇴 확인 후 원래 페이지로 돌아옴\r\n    navigate('/login'); // 로그인 페이지로 이동\r\n  };\r\n\r\n  const handleClick = () => {\r\n    navigate('/home');\r\n  };\r\n\r\n  if (isWithdraw) {\r\n    return <PasswordConfirmation onWithdraw={handleConfirmWithdraw} />; // PasswordConfirmation 컴포넌트를 표시\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <button onClick={handleClick} style={{ cursor: 'pointer', border: 'none', background: 'none', width: '300px', display: 'block', margin: '0 auto', outline: 'none' }}>\r\n        <img src=\"Home.jpg\" alt=\"Go to Home\" style={{ width: '250px', height: '120px' }} />\r\n      </button>\r\n      <div className=\"mypage-box\">\r\n        <h1>Mypage</h1>\r\n        <div>\r\n          <label htmlFor=\"username\">이름 </label>\r\n          <input type=\"text\" id=\"username\" value={username} onChange={(e) => setUsername(e.target.value)} />\r\n        </div>\r\n        <div>\r\n          <label htmlFor=\"email\">이메일 </label>\r\n          <input type=\"text\" id=\"email\" value={email} readOnly />\r\n        </div>\r\n        <div className=\"mypage-button-container\">\r\n          <button onClick={handleLogout} className=\"logout-button\">로그아웃</button>\r\n          <div className=\"vertical-separator\"></div>\r\n          <button onClick={handleWithdraw} className=\"withdraw-button\">회원탈퇴</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default MyPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}