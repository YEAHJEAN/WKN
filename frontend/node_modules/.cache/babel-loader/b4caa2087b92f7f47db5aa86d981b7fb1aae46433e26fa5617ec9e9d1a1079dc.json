{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import axios from'axios';import'./Mypage.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function MyPage(){const navigate=useNavigate();const[username,setUsername]=useState('');const[email,setEmail]=useState('');useEffect(()=>{const storedEmail=sessionStorage.getItem('email');if(storedEmail){console.log('이메일 가져오기 성공:',storedEmail);setEmail(storedEmail);fetchUserData(storedEmail);}},[]);const fetchUserData=async email=>{try{const response=await axios.get(\"/api/userdata?email=\".concat(email));if(response.status===200){console.log('가져온 사용자 데이터:',response.data);// 데이터 로그 추가\nsetUsername(response.data.username);}else{console.error('사용자 데이터 가져오기 실패');}}catch(error){console.error('사용자 데이터 가져오기 실패:',error);}};const handleLogout=()=>{axios.post('/api/logout').then(response=>{sessionStorage.removeItem('email');console.log('세션에서 이메일 삭제:',email);navigate('/login');}).catch(error=>{console.error('로그아웃 실패:',error);});};const handleWithdraw=()=>{const storedEmail=sessionStorage.getItem('email');axios.post('/api/withdraw',{email:storedEmail}).then(response=>{if(response.status===200){sessionStorage.removeItem('email');console.log('세션에서 이메일 삭제:',storedEmail);navigate('/login');}else{console.error('회원 탈퇴 실패');}}).catch(error=>{console.error('회원 탈퇴 실패:',error);});};const handleClick=()=>{navigate('/home');};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleClick,style:{cursor:'pointer',border:'none',background:'none',width:'300px',display:'block',margin:'0 auto',outline:'none'},children:/*#__PURE__*/_jsx(\"img\",{src:\"Home.jpg\",alt:\"Go to Home\",style:{width:'250px',height:'120px'}})}),/*#__PURE__*/_jsxs(\"div\",{className:\"mypage-box\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Mypage\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"username\",children:\"\\uC774\\uB984 \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"username\",value:username,onChange:e=>setUsername(e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"\\uC774\\uBA54\\uC77C \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"email\",value:email,readOnly:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"button-container\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,className:\"logout-button\",children:\"\\uB85C\\uADF8\\uC544\\uC6C3\"}),/*#__PURE__*/_jsx(\"div\",{className:\"vertical-separator\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleWithdraw,className:\"withdraw-button\",children:\"\\uD68C\\uC6D0\\uD0C8\\uD1F4\"})]})]})]});}export default MyPage;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","axios","jsx","_jsx","jsxs","_jsxs","MyPage","navigate","username","setUsername","email","setEmail","storedEmail","sessionStorage","getItem","console","log","fetchUserData","response","get","concat","status","data","error","handleLogout","post","then","removeItem","catch","handleWithdraw","handleClick","children","onClick","style","cursor","border","background","width","display","margin","outline","src","alt","height","className","htmlFor","type","id","value","onChange","e","target","readOnly"],"sources":["C:/Users/user/mk/frontend/src/Mypage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport './Mypage.css';\r\n\r\nfunction MyPage() {\r\n  const navigate = useNavigate();\r\n  const [username, setUsername] = useState('');\r\n  const [email, setEmail] = useState('');\r\n\r\n  useEffect(() => {\r\n    const storedEmail = sessionStorage.getItem('email');\r\n    if (storedEmail) {\r\n      console.log('이메일 가져오기 성공:', storedEmail);\r\n      setEmail(storedEmail);\r\n      fetchUserData(storedEmail);\r\n    }\r\n  }, []);\r\n\r\n  const fetchUserData = async (email) => {\r\n    try {\r\n      const response = await axios.get(`/api/userdata?email=${email}`);\r\n      if (response.status === 200) {\r\n        console.log('가져온 사용자 데이터:', response.data);  // 데이터 로그 추가\r\n        setUsername(response.data.username);\r\n      } else {\r\n        console.error('사용자 데이터 가져오기 실패');\r\n      }\r\n    } catch (error) {\r\n      console.error('사용자 데이터 가져오기 실패:', error);\r\n    }\r\n  };\r\n\r\n  const handleLogout = () => {\r\n    axios.post('/api/logout')\r\n      .then(response => {\r\n        sessionStorage.removeItem('email');\r\n        console.log('세션에서 이메일 삭제:', email);\r\n        navigate('/login');\r\n      })\r\n      .catch(error => {\r\n        console.error('로그아웃 실패:', error);\r\n      });\r\n  };\r\n\r\n  const handleWithdraw = () => {\r\n    const storedEmail = sessionStorage.getItem('email');\r\n\r\n    axios.post('/api/withdraw', { email: storedEmail })\r\n      .then(response => {\r\n        if (response.status === 200) {\r\n          sessionStorage.removeItem('email');\r\n          console.log('세션에서 이메일 삭제:', storedEmail);\r\n          navigate('/login');\r\n        } else {\r\n          console.error('회원 탈퇴 실패');\r\n        }\r\n      })\r\n      .catch(error => {\r\n        console.error('회원 탈퇴 실패:', error);\r\n      });\r\n  };\r\n\r\n  const handleClick = () => {\r\n    navigate('/home');\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <button onClick={handleClick} style={{ cursor: 'pointer', border: 'none', background: 'none', width: '300px', display: 'block', margin: '0 auto', outline: 'none' }}>\r\n        <img src=\"Home.jpg\" alt=\"Go to Home\" style={{ width: '250px', height: '120px' }} />\r\n      </button>\r\n      <div className=\"mypage-box\">\r\n        <h1>Mypage</h1>\r\n        <div>\r\n          <label htmlFor=\"username\">이름 </label>\r\n          <input type=\"text\" id=\"username\" value={username} onChange={(e) => setUsername(e.target.value)} />\r\n        </div>\r\n        <div>\r\n          <label htmlFor=\"email\">이메일 </label>\r\n          <input type=\"text\" id=\"email\" value={email} readOnly />\r\n        </div>\r\n        <div className=\"button-container\">\r\n          <button onClick={handleLogout} className=\"logout-button\">로그아웃</button>\r\n          <div className=\"vertical-separator\"></div>\r\n          <button onClick={handleWithdraw} className=\"withdraw-button\">회원탈퇴</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default MyPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}