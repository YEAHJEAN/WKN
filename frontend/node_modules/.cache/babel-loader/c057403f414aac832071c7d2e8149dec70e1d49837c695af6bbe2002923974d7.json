{"ast":null,"code":"import React,{useEffect,useState}from'react';import{useNavigate}from'react-router-dom';import axios from'axios';import'./ChatroomList.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ChatroomList=()=>{const[chatrooms,setChatrooms]=useState([]);const[username,setUsername]=useState('');const email=sessionStorage.getItem('email');const navigate=useNavigate();useEffect(()=>{const fetchChatrooms=async()=>{try{const response=await axios.get('https://kmk510.store/api/chatrooms');setChatrooms(response.data);}catch(error){console.error('Error fetching chatrooms:',error);}};const fetchUsername=async()=>{try{const response=await axios.get(\"https://kmk510.store/api/userdata?email=\".concat(email));if(response.status===200){setUsername(response.data.username);}else{console.error('Failed to fetch username');}}catch(error){console.error('Error fetching username:',error);}};fetchChatrooms();fetchUsername();},[email]);const handleChatroom=chatroom_id=>{navigate(\"/chat/\".concat(chatroom_id,\"/\").concat(username));};const handleCreateChatroom=()=>{navigate('/Chatroom');};const handleClick=()=>{navigate('/home');};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleClick,style:{cursor:'pointer',border:'none',background:'none',width:'300px',display:'block',margin:'0 auto',outline:'none'},children:/*#__PURE__*/_jsx(\"img\",{src:\"Home.jpg\",alt:\"Go to Home\",style:{width:'250px',height:'120px'}})}),/*#__PURE__*/_jsxs(\"div\",{className:\"chatroomlist-container\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleCreateChatroom,className:\"chatroom-image-button\",children:/*#__PURE__*/_jsx(\"img\",{src:\"Chat.png\",alt:\"Go to Chatroom\"})}),/*#__PURE__*/_jsx(\"h1\",{children:\"Available Chatrooms\"}),chatrooms.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"chatroom-grid\",children:chatrooms.map(chatroom_id=>/*#__PURE__*/_jsxs(\"div\",{className:\"chatroom-card\",onClick:()=>handleChatroom(chatroom_id),children:[\"Chatroom ID: \",chatroom_id]},chatroom_id))}):/*#__PURE__*/_jsx(\"p\",{children:\"No chatrooms available\"})]})]});};export default ChatroomList;","map":{"version":3,"names":["React","useEffect","useState","useNavigate","axios","jsx","_jsx","jsxs","_jsxs","ChatroomList","chatrooms","setChatrooms","username","setUsername","email","sessionStorage","getItem","navigate","fetchChatrooms","response","get","data","error","console","fetchUsername","concat","status","handleChatroom","chatroom_id","handleCreateChatroom","handleClick","children","onClick","style","cursor","border","background","width","display","margin","outline","src","alt","height","className","length","map"],"sources":["C:/Users/user/mk/frontend/src/ChatroomList.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport './ChatroomList.css';\r\n\r\nconst ChatroomList = () => {\r\n  const [chatrooms, setChatrooms] = useState([]);\r\n  const [username, setUsername] = useState('');\r\n  const email = sessionStorage.getItem('email');\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    const fetchChatrooms = async () => {\r\n      try {\r\n        const response = await axios.get('https://kmk510.store/api/chatrooms');\r\n        setChatrooms(response.data);\r\n      } catch (error) {\r\n        console.error('Error fetching chatrooms:', error);\r\n      }\r\n    };\r\n\r\n    const fetchUsername = async () => {\r\n      try {\r\n        const response = await axios.get(`https://kmk510.store/api/userdata?email=${email}`);\r\n        if (response.status === 200) {\r\n          setUsername(response.data.username);\r\n        } else {\r\n          console.error('Failed to fetch username');\r\n        }\r\n      } catch (error) {\r\n        console.error('Error fetching username:', error);\r\n      }\r\n    };\r\n\r\n    fetchChatrooms();\r\n    fetchUsername();\r\n  }, [email]);\r\n\r\n  const handleChatroom = (chatroom_id) => {\r\n    navigate(`/chat/${chatroom_id}/${username}`);\r\n  };\r\n\r\n  const handleCreateChatroom = () => {\r\n    navigate('/Chatroom');\r\n  };\r\n\r\n  const handleClick = () => {\r\n    navigate('/home');\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <button onClick={handleClick} style={{ cursor: 'pointer', border: 'none', background: 'none', width: '300px', display: 'block', margin: '0 auto', outline: 'none' }}>\r\n        <img src=\"Home.jpg\" alt=\"Go to Home\" style={{ width: '250px', height: '120px' }} />\r\n      </button>\r\n      <div className=\"chatroomlist-container\">\r\n      <button onClick={handleCreateChatroom} className=\"chatroom-image-button\">\r\n        <img src=\"Chat.png\" alt=\"Go to Chatroom\" />\r\n      </button>\r\n      <h1>Available Chatrooms</h1>\r\n      {chatrooms.length > 0 ? (\r\n        <div className=\"chatroom-grid\">\r\n          {chatrooms.map(chatroom_id => (\r\n            <div key={chatroom_id} className=\"chatroom-card\" onClick={() => handleChatroom(chatroom_id)}>\r\n              Chatroom ID: {chatroom_id}\r\n            </div>\r\n          ))}\r\n        </div>\r\n      ) : (\r\n        <p>No chatrooms available</p>\r\n      )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ChatroomList;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}