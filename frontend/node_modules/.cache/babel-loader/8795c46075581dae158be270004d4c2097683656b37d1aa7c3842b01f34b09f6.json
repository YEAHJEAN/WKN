{"ast":null,"code":"import React,{useState}from'react';import{useNavigate}from'react-router-dom';import axios from'axios';import'./Post.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Post(){const navigate=useNavigate();const[title,setTitle]=useState('');const[content,setContent]=useState('');const[category,setCategory]=useState('');const[image,setImage]=useState(null);const email=sessionStorage.getItem('email');console.log('이메일:',email);const handleClick=()=>{navigate('/home');};const handleTitleChange=event=>{setTitle(event.target.value);};const handleContentChange=event=>{setContent(event.target.value);};const handleCategoryChange=event=>{setCategory(event.target.value);};const handleImageChange=event=>{setImage(event.target.files[0]);};const handleSubmit=async event=>{event.preventDefault();if(!title&&!content&&!category){alert('제목, 내용 및 카테고리를 입력해주세요.');return;}if(!title){alert('제목을 입력해주세요.');return;}if(!category){alert('카테고리를 선택해주세요.');return;}try{// 기본 게시글 데이터\nconst formData=new FormData();formData.append('title',title);formData.append('content',content);formData.append('category',category);formData.append('author',email);// 이미지 파일 추가\nif(image){formData.append('image',image);}// formData 확인용 로그 추가\nfor(let pair of formData.entries()){console.log(pair[0]+', '+pair[1]);}console.log('전송하는 데이터:',formData);const response=await axios.post('https://kmk510.store/api/posts',formData,{headers:{'Content-Type':'multipart/form-data'}});if(response.status===200||response.status===201){console.log('게시되었습니다.');setTitle('');setContent('');setCategory('');setImage(null);alert('게시되었습니다.');navigate('/home');}else{console.error('게시 중 오류가 발생했습니다.',response);alert('게시 중 오류가 발생했습니다.');}}catch(error){console.error('게시 중 오류 발생:',error);alert('게시 중 오류가 발생했습니다.');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"post-box\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleClick,style:{cursor:'pointer',border:'none',background:'none',width:'300px',display:'block',margin:'0 auto',outline:'none'},children:/*#__PURE__*/_jsx(\"img\",{src:\"Home.jpg\",alt:\"Go to Home\",style:{width:'250px',height:'120px'}})}),/*#__PURE__*/_jsx(\"h1\",{children:\"Board\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:title,placeholder:\"\\uC81C\\uBAA9\\uC744 \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694\",onChange:handleTitleChange,className:\"input-field\"}),/*#__PURE__*/_jsx(\"textarea\",{value:content,placeholder:\"\\uB0B4\\uC6A9\\uC744 \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694\",onChange:handleContentChange,className:\"input-field\"}),/*#__PURE__*/_jsxs(\"select\",{value:category,onChange:handleCategoryChange,className:\"input-field\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\uCE74\\uD14C\\uACE0\\uB9AC\\uB97C \\uC120\\uD0DD\\uD574\\uC8FC\\uC138\\uC694\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\uC774\\uBBFC\",children:\"\\uC774\\uBBFC\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\uC720\\uD559\",children:\"\\uC720\\uD559\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\uC5EC\\uD589\",children:\"\\uC5EC\\uD589\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\uC0DD\\uD65C\",children:\"\\uC0DD\\uD65C\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\uC0AC\\uC9C4\",children:\"\\uC0AC\\uC9C4\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",onChange:handleImageChange,className:\"input-field\"}),\" \",/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"submit-button\",children:\"\\uAC8C\\uC2DC\"})]})]});}export default Post;","map":{"version":3,"names":["React","useState","useNavigate","axios","jsx","_jsx","jsxs","_jsxs","Post","navigate","title","setTitle","content","setContent","category","setCategory","image","setImage","email","sessionStorage","getItem","console","log","handleClick","handleTitleChange","event","target","value","handleContentChange","handleCategoryChange","handleImageChange","files","handleSubmit","preventDefault","alert","formData","FormData","append","pair","entries","response","post","headers","status","error","className","children","onClick","style","cursor","border","background","width","display","margin","outline","src","alt","height","onSubmit","type","placeholder","onChange"],"sources":["C:/Users/user/mk/frontend/src/Post.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport './Post.css';\r\n\r\nfunction Post() {\r\n  const navigate = useNavigate();\r\n  const [title, setTitle] = useState('');\r\n  const [content, setContent] = useState('');\r\n  const [category, setCategory] = useState('');\r\n  const [image, setImage] = useState(null);\r\n  const email = sessionStorage.getItem('email');\r\n  console.log('이메일:', email);\r\n\r\n  const handleClick = () => {\r\n    navigate('/home');\r\n  };\r\n\r\n  const handleTitleChange = (event) => {\r\n    setTitle(event.target.value);\r\n  };\r\n\r\n  const handleContentChange = (event) => {\r\n    setContent(event.target.value);\r\n  };\r\n\r\n  const handleCategoryChange = (event) => {\r\n    setCategory(event.target.value);\r\n  };\r\n\r\n  const handleImageChange = (event) => {\r\n    setImage(event.target.files[0]);\r\n  };\r\n\r\n  const handleSubmit = async (event) => {\r\n    event.preventDefault();\r\n\r\n    if (!title && !content && !category) {\r\n      alert('제목, 내용 및 카테고리를 입력해주세요.');\r\n      return;\r\n    }\r\n\r\n    if (!title) {\r\n      alert('제목을 입력해주세요.');\r\n      return;\r\n    }\r\n\r\n    if (!category) {\r\n      alert('카테고리를 선택해주세요.');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      // 기본 게시글 데이터\r\n      const formData = new FormData();\r\n      formData.append('title', title);\r\n      formData.append('content', content);\r\n      formData.append('category', category);\r\n      formData.append('author', email);\r\n\r\n      // 이미지 파일 추가\r\n      if (image) {\r\n          formData.append('image', image);\r\n      }\r\n\r\n      // formData 확인용 로그 추가\r\n      for (let pair of formData.entries()) {\r\n        console.log(pair[0] + ', ' + pair[1]);\r\n    }\r\n\r\n      console.log('전송하는 데이터:', formData);\r\n\r\n      const response = await axios.post('https://kmk510.store/api/posts', formData, {\r\n          headers: {\r\n              'Content-Type': 'multipart/form-data'\r\n          }\r\n      });\r\n\r\n      if (response.status === 200 || response.status === 201) {\r\n        console.log('게시되었습니다.');\r\n        setTitle('');\r\n        setContent('');\r\n        setCategory('');\r\n        setImage(null);\r\n        alert('게시되었습니다.');\r\n        navigate('/home');\r\n      } else {\r\n        console.error('게시 중 오류가 발생했습니다.', response);\r\n        alert('게시 중 오류가 발생했습니다.');\r\n      }\r\n    } catch (error) {\r\n      console.error('게시 중 오류 발생:', error);\r\n      alert('게시 중 오류가 발생했습니다.');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"post-box\">\r\n      <button onClick={handleClick} style={{ cursor: 'pointer', border: 'none', background: 'none', width: '300px', display: 'block', margin: '0 auto', outline: 'none' }}>\r\n        <img src=\"Home.jpg\" alt=\"Go to Home\" style={{ width: '250px', height: '120px' }} />\r\n      </button>\r\n      <h1>Board</h1>\r\n      <form onSubmit={handleSubmit}>\r\n        <input type=\"text\" value={title} placeholder=\"제목을 입력해주세요\" onChange={handleTitleChange} className=\"input-field\" />\r\n        <textarea value={content} placeholder=\"내용을 입력해주세요\" onChange={handleContentChange} className=\"input-field\" />\r\n        <select value={category} onChange={handleCategoryChange} className=\"input-field\">\r\n          <option value=\"\">카테고리를 선택해주세요</option>\r\n          <option value=\"이민\">이민</option>\r\n          <option value=\"유학\">유학</option>\r\n          <option value=\"여행\">여행</option>\r\n          <option value=\"생활\">생활</option>\r\n          <option value=\"사진\">사진</option>\r\n        </select>\r\n        <input type=\"file\" onChange={handleImageChange} className=\"input-field\" /> {/* 이미지 업로드 필드 추가 */}\r\n        <button type=\"submit\" className=\"submit-button\">게시</button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Post;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}